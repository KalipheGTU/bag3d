

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Comparing the 3D BAG heights to the AHN 0.5m DSM &mdash; bag3d  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> bag3d
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download the data</a></li>
<li class="toctree-l1"><a class="reference internal" href="quality.html">Quality of the 3D BAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="_modules/modules.html">The bag3d application</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bag3d</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Comparing the 3D BAG heights to the AHN 0.5m DSM</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ahn.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="comparing-the-3d-bag-heights-to-the-ahn-0-5m-dsm">
<h1>Comparing the 3D BAG heights to the AHN 0.5m DSM<a class="headerlink" href="#comparing-the-3d-bag-heights-to-the-ahn-0-5m-dsm" title="Permalink to this headline">¶</a></h1>
<p>There are several height values computed for each building. These are
the values of the ground and roof surface at different heights. For
example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>id</td>
<td>ground-0.00</td>
<td>ground-0.10</td>
<td>ground-0.20</td>
<td>ground-0.30</td>
<td>ground-0.40</td>
<td>ground-0.50</td>
<td>roof-0.00</td>
<td>roof-0.10</td>
<td>roof-0.25</td>
<td>roof-0.50</td>
<td>roof-0.75</td>
<td>roof-0.90</td>
<td>roof-0.95</td>
<td>roof-0.99</td>
</tr>
<tr class="row-even"><td>b31bdd44c-00ba-11e6-b420-2bdcc4ab5d7f</td>
<td>-0.03</td>
<td>0.01</td>
<td>0.02</td>
<td>0.02</td>
<td>0.03</td>
<td>0.04</td>
<td>-0.03</td>
<td>0.01</td>
<td>0.02</td>
<td>0.04</td>
<td>0.11</td>
<td>2.36</td>
<td>2.38</td>
<td>2.44</td>
</tr>
</tbody>
</table>
<p>The height values are derived from a point cloud. When using a point
cloud that was acquired by airborne laser scanning (eg. AHN), most of
the points are “on” the roof of the building, and there can be various
amounts of points on the walls.</p>
<p>The AHN 0.5m DSM is used as reference, both AHN2 and AHN3. Our
assumption is that in the higher percentile range (eg. 70-99) the
difference between the 3dfier output and the AHN-raster will be low,
while in the lower percentile range the difference will be high.</p>
<p>The differences in percentiles are computed as:</p>
<blockquote>
<div>difference = 3dbag_percentile - reference_percentile</div></blockquote>
<p>Where <em>reference_percentile</em> is computed with the
<a class="reference external" href="https://pythonhosted.org/rasterstats/manual.html#zonal-statistics">zonal_stats</a>
function of the <em>rasterstats</em> python library. The function takes a list
of polygons and computes zonal statistics on a raster for each polygon.
Thus in our case the zonal statistics are <em>percentile 10, percentile 20
etc.</em>, which are the same that the 3D BAG contains.</p>
<p>Number of buildings in the test sample: <strong>185871</strong></p>
<p>The statistical summary together with the box plot confirms that there are some very heavy outliers in the distances that were computed from the AHN3 raster. For now we ignore the reason for having differences in the range of thousands of meters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="13%" />
<col width="11%" />
<col width="15%" />
<col width="18%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Min.</td>
<td>1st Qu.</td>
<td>Median</td>
<td>Mean</td>
<td>3rd Qu.</td>
<td>Max.</td>
<td>NA’s</td>
</tr>
<tr class="row-even"><td>-133.499</td>
<td>0.869</td>
<td>2.402</td>
<td>6.206</td>
<td>4.968</td>
<td>10012.240</td>
<td>17881</td>
</tr>
</tbody>
</table>
<img alt="_images/q_box1.png" class="align-center" src="_images/q_box1.png" />
<p>We the interquartile range to identify and remove the largest outliers. Given that <em>Q_1</em> and <em>Q_3</em> denote the first and third quartiles, <em>IQR</em> denotes the interquartile range, then a data point <em>p</em> is considered an outlier if:</p>
<blockquote>
<div>p &lt; Q_1 - (1.5 * IQR)</div></blockquote>
<p>or</p>
<blockquote>
<div>p &gt; Q_3 - (1.5 * IQR)</div></blockquote>
<p>With this method the lower limit for being an outlier is set to <em>-5.23</em>, the upper limit to <em>11.11</em> meters difference and we remove <em>1.96%</em> of the data points. However, the difference in height values is still suspiciously high in the box plots below. They indicate that 2.5–5m height difference is common in the 50th–99th percentile range.</p>
<img alt="_images/q_box2.png" class="align-center" src="_images/q_box2.png" />
<p>Let’s take a closer look at the difference between the building heights obtained from the AHN DSM and the 3D BAG. The plot below shows the median building heights across the whole sample at each of the seven percentiles. We can clearly see that in case of the 3D BAG the median height of the buildings is increasing with the percentiles, which is according to the expectation. However, in case of the AHN raster the heights fall very close to 4 meters across all percentiles. This behavior is mainly due to the relatively coarse resolution of the raster and the sampling method for creating the raster.</p>
<img alt="_images/q_box3.png" class="align-center" src="_images/q_box3.png" />
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Balázs Dukai.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>